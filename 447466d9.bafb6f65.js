(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{148:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var a=n(2),r=n(9),o=(n(0),n(177)),i={id:"nginx",title:"NGINX",sidebar_label:"NGINX"},c={id:"code_doc/ssl/nginx",title:"NGINX",description:"A quick word about NGINX. NGINX is running on port 80 and 443 and redirects to the node.js server. In the case of port 80 it redirects to 443 which has SSL. The config file for NGINX is under /etc/nginx/sites-available with a symbolic link to /etc/nginx/sites-enabled. The symbolic link was made with",source:"@site/docs/code_doc/ssl/nginx.md",permalink:"/Coastal-Image-Labeler/docs/code_doc/ssl/nginx",editUrl:"https://github.com/UNCG-DAISY/Coastal-Image-Labeler/edit/master/docs/code_doc/ssl/nginx.md",sidebar_label:"NGINX",sidebar:"docs",previous:{title:"Adding Images to DB",permalink:"/Coastal-Image-Labeler/docs/code_doc/cli/addImages"},next:{title:"Certbot",permalink:"/Coastal-Image-Labeler/docs/code_doc/ssl/certbot"}},s=[{value:"NGINX Commands",id:"nginx-commands",children:[{value:"Test config",id:"test-config",children:[]},{value:"Reload (needed after any change)",id:"reload-needed-after-any-change",children:[]}]}],l={rightToc:s};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"A quick word about NGINX. NGINX is running on port 80 and 443 and redirects to the node.js server. In the case of port 80 it redirects to 443 which has SSL. The config file for NGINX is under ",Object(o.b)("inlineCode",{parentName:"p"},"/etc/nginx/sites-available")," with a symbolic link to ",Object(o.b)("inlineCode",{parentName:"p"},"/etc/nginx/sites-enabled"),". The symbolic link was made with"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Symbolic link"',title:'"Symbolic','link"':!0}),"sudo ln -s /etc/nginx/sites-available/coast /etc/nginx/sites-enabled/coast\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cpp",metastring:'title="/etc/nginx/sites-available/coast NGINX"',title:'"/etc/nginx/sites-available/coast','NGINX"':!0}),"server {\n    \n    error_page 500 502 503 504 404 /production.custom_error.html;\n    location = /production.custom_error.html {\n            root /home/shahnafis/GitHub/Coastal-Image-Labeler/src/html;\n            internal;\n    }\n\n    location / {\n       proxy_pass http://localhost:4201; #whatever port your app runs on\n       proxy_http_version 1.1;\n       proxy_set_header Upgrade $http_upgrade;\n       proxy_set_header Connection 'upgrade';\n       proxy_set_header Host $host;\n       proxy_cache_bypass $http_upgrade;\n    }\n\n    server_name dev.coastalimagelabeler.science;\n}\n")),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"Server Name and Error Page")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Remember to change the ",Object(o.b)("inlineCode",{parentName:"p"},"server_name")," at the bottom if on a different domain/subdomain and\nthe Error html files up top depending if on the production or development VM."))),Object(o.b)("p",null,"This is all you have to type in for now. ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"./certbot"}),"Certbot")," will edit this file later based on the ",Object(o.b)("inlineCode",{parentName:"p"},"server_name")),Object(o.b)("p",null,"Make sure to put the ",Object(o.b)("inlineCode",{parentName:"p"},"custom_502.html")," under ",Object(o.b)("inlineCode",{parentName:"p"},"/usr/share/nginx/html"),"."),Object(o.b)("h2",{id:"nginx-commands"},"NGINX Commands"),Object(o.b)("h3",{id:"test-config"},"Test config"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Testing file"',title:'"Testing','file"':!0}),"sudo nginx -t\n")),Object(o.b)("h3",{id:"reload-needed-after-any-change"},"Reload (needed after any change)"),Object(o.b)("p",null,"And then any changes requires a reload."),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash",metastring:'title="Reloading changes"',title:'"Reloading','changes"':!0}),"sudo systemctl reload nginx\n")))}d.isMDXComponent=!0},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),d=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=d(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=d(n),m=a,u=b["".concat(i,".").concat(m)]||b[m]||p[m]||o;return n?r.a.createElement(u,c(c({ref:t},l),{},{components:n})):r.a.createElement(u,c({ref:t},l))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);